<context>
<input pattern="(привет *|здравствуй* *|здорово *|добр* (день|вечер|утро))">
    <output value="Вас приветствует бот-помощник кинотеатра Кинотеатр! Чем я могу вам помочь?"/>

    <!--купить билет-->
    <context id="buy_tickets">
    <input pattern=" * {(купить|забронировать) билет* } [на [фильм] $Text] *">

        <var name="Film" value="$Text" if="full($Text)" scope="input"/>
        <!--<var name="Film" value="Empty" if="empty($Text)" scope="user"/>-->

    <!--сразу спросить время, если есть название фильма-->
    <context id="ask_time" if="full($Text)" />

        <!--спросить название фильма   -->
         <context if="empty($Text)" modal="true">
             <output value="Пожалуйста, введите название фильма"/>
                <input pattern="* $Text *">
                <var name="Film" value="$Text" scope="user"/>
                <output value="$Film - отличный выбор!"/>
                </input>
        </context>

        <!--спросить дату и время сеанса-->
        <context id="ask_time">
            <input pattern="* $Date $Time *">
                <var name="Date" value="$Date" scope="user"/>
                <var name="Time" value="$Time" scope="user"/>
                <output value="Проверяем наличие билетов на $Film $Date в $Time"/>
                </input>
        </context>


        </input>
    </context>

    <!--вернуть билет-->
    <context id="return_tickets">
        <input pattern=" * {(вернуть|сдать) билет*} *"/>
        <output value="Пожалуйста, введите номер заказа"/>
    </context>

</input>
</context>